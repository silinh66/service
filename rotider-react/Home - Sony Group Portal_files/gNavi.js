!function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var t=function(t){return document.querySelector(t)},e=function(t){return document.querySelectorAll(t)},i={ja:{menu:"メニュー",close:"閉じる"},en:{menu:"Menu",close:"Close"}},n=function(i){var n=this;this.lang=i,this.mql=window.matchMedia("(min-width: 641px)"),this.isDesktop=this.mql.matches,this.mql.addEventListener("change",(function(){n.isDesktop=n.mql.matches,n.prepare()})),this.$body=t("body"),this.$header=t("#tmpl-header"),this.$bg=t(".tmpl-header_bg"),this.$head=t(".tmpl-header_head"),this.$dropdownContainers=e(".tmpl-headerNavItem_dropDown"),this.$logo=t(".tmpl-header_logo"),this.$logoImg=t(".tmpl-header_logo_img"),this.$hamburgerBtn=t(".tmpl-headerHamburger"),this.$hamburgerBtnName=t(".tmpl-headerHamburger_name"),this.$nav=t(".tmpl-headerNav"),this.$navItem=e(".tmpl-headerNav_item"),this.$navItemLink=e(".tmpl-headerNavItem_label"),this.$contentTtlLink=e(".tmpl-headerContents_ttl > a"),this.$contentItem=e(".tmpl-headerContents_item > a"),this.$navTopLink=e(".tmpl-headerNavDropDown_toCategoryTop > a"),this.$navLink=e(".tmpl-headerNavDropDown_item > a"),this.$dropDownBg=t(".tmpl-headerNavDropDownBg"),this.$dropDownBtn=e(".tmpl-headerNavItem_label"),this.$spDropDownBtn=e(".tmpl-headerNavItem_home, .tmpl-headerNavItem_label, .contactLink"),this.$dropDown=e(".tmpl-headerNavDropDown"),this.$dropClose=e(".tmpl-headerClose"),this.$dropDownItem=e(".tmpl-headerNavDropDownItem"),this.$searchBtn=t(".tmpl-header_searchBtn:not(.tmpl-headerSearch_close)"),this.$search=t(".tmpl-headerSearch"),this.$searchInput=t(".tmpl-headerSearch_input"),this.$searchBlue=t("#searchBlue"),this.searchImg=t(".tmpl-header_searchBtn svg"),this.searchcloseBtn=t(".tmpl-header_searchCloseBtn"),this.$searchName=t(".tmpl-header_searchBtn_name"),this.$searchClose=e(".tmpl-headerSearch_close"),this.$contact=t(".contactLink"),this.$pauseBtn=t(".tmpl-headerNav_pauseController_btn"),this.$link=this.$header.querySelectorAll("a"),this.dropDownClassNames=["js-dropDown","js-dropDownBg"],this.$allAnchors=[e(".tmpl-header_head a"),e(".tmpl-header_nav a")],this.isOpen=!1,this.dropDownDelay=150,this.savedScrollTop=0,this.scrollTimer=!1,this.isPauseSlider=!1,this.duration=.28,this.className={open:"is-open",hide:"is-hide"},this.isShowSearchArea=!1,this.isDrop=!1};n.prototype={init:function(){this.addSearchButtonFocusEvent(),this.adjustLogoElement(),this.prepare(),this.addEvents(),this.setImg()},reset:function(){this.$head.classList.remove(this.className.open);for(var t=0;t<this.$navItem.length;t++)this.$navItem[t].classList.remove(this.className.open);this.$nav.style.height="";for(t=0;t<this.$dropDown.length;t++)this.$dropDown[t].style.height="";this.$dropDownBg.style.width="",this.$dropDownBg.style.height="";for(var e=0;e<this.$navItemLink.length;e++)this.$navItemLink[e].setAttribute("aria-expanded",!1);for(var i=0;i<this.$dropdownContainers.length;i++)this.$dropdownContainers[i].style.visibility="hidden";},prepare:function(){this.isDesktop?this.prepareDesktop():this.prepareMobile()},prepareDesktop:function(){document.querySelector("#tmpl-header_nav").style.visibility="visible",this.$header.classList.remove("sp-header"),this.reset();for(var t=0;t<this.$spDropDownBtn.length;t++)this.$spDropDownBtn[t].style.visibility="visible"},prepareMobile:function(){this.$header.classList.add("sp-header"),this.reset();for(var t=0;t<this.$spDropDownBtn.length;t++)this.$spDropDownBtn[t].style.visibility="hidden"},updateHamburgerBtnStateAsHide:function(){var t=this.$hamburgerBtn.getAttribute("aria-controls");this.$hamburgerBtnName.innerText=i[this.lang].menu,this.$hamburgerBtn.setAttribute("aria-expanded",!1),document.querySelector("#".concat(t)).style.visibility="hidden"},updateHamburgerBtnStateAsShow:function(){var t=this.$hamburgerBtn.getAttribute("aria-controls");this.$hamburgerBtnName.innerText=i[this.lang].close,this.$hamburgerBtn.setAttribute("aria-expanded",!0),document.querySelector("#".concat(t)).style.visibility="visible"},addSearchButtonFocusEvent:function(){if(document.querySelector(".mf_finder_header .mf_finder_searchBox_submit")==null){setTimeout(this.addSearchButtonFocusEvent,100);return} var t=this,e=document.querySelector(".mf_finder_header"),i=e.querySelector(".mf_finder_searchBox_submit"),n=e.querySelector(".mf_finder_searchBox_query_input");document.querySelector("#tmpl-header_searchBtn").addEventListener("blur",(function(){t.isShowSearchArea&&n.focus()})),i.addEventListener("blur",(function(e){setTimeout((function(){if(document.activeElement!==n){var e=document.querySelector(".search_close");e&&t.isShowSearchArea&&e.focus()}}),30)})),n.addEventListener("blur",(function(){setTimeout((function(){if(document.activeElement!==i){var e=document.querySelector(".search_close");e&&t.isShowSearchArea&&e.focus()}}),30)}))},adjustLogoElement:function(){var t=location.pathname;if(!t.endsWith("/en/")&&!t.endsWith("/ja/")){var e=this.getLogoSrc(),i=document.createElement("p");i.innerHTML='<a href="/en/" data-analytics-name="SonyLogo"><img src="'.concat(e,'" alt="SONY" class="tmpl-header_logo_img"></a>'),i.classList.add("tmpl-header_logo"),this.$logo.replaceWith(i)}},onDropDownClick:function(t){t.preventDefault(),this.isDesktop?this.onDropDownClickForDeskTop(t):this.onDropDownClickForMobile(t)},onDropDownClickForMobile:function(t){var e=t.currentTarget.getAttribute("aria-controls"),i=document.getElementById(e),n=this.setDropDownTarget(t),s=n.$navItem,o=n.$dropDown,r=n.tweenOption,a=s.querySelector(".tmpl-headerNavItem_label");1==s.classList.contains(this.className.open)?(i.style.visibility="hidden",s.querySelector(".tmpl-headerNavItem_name").innerText="開く",a.setAttribute("aria-expanded",!1),this.closeDropDown(s,o,r)):(i.style.visibility="visible",s.querySelector(".tmpl-headerNavItem_name").innerText="閉じる",a.setAttribute("aria-expanded",!0),this.openDropDown(s,o,r))},onDropDownClickForDeskTop:function(t){var e=this;t.preventDefault();var i=t.currentTarget,n=i.parentNode.classList.contains("is-open"),s=i.getAttribute("aria-controls"),o=document.getElementById(s);n?(this.$navItem.forEach((function(t){e.closeDropDown(t,e.$dropDown,{duration:0});var i=t.querySelector(".tmpl-headerNavItem_label");i&&i.setAttribute("aria-expanded",!1)})),this.$dropDown.forEach((function(t){t.style.visibility="hidden",t.querySelectorAll(".tmpl-headerContents_item > a").forEach((function(t){t.style.visibility="hidden"}))}))):(this.onMouseEnterDropDownBtn(t),this.$navItem.forEach((function(t){var e=t.querySelector(".tmpl-headerNavItem_label");e&&e.setAttribute("aria-expanded",!1)})),this.$dropDown.forEach((function(t){t!==o?(t.style.visibility="hidden",t.querySelectorAll(".tmpl-headerContents_item > a").forEach((function(t){t.style.visibility="hidden"}))):(t.style.visibility="visible",t.querySelectorAll(".tmpl-headerContents_item > a").forEach((function(t){t.style.visibility="visible"})))})),i.setAttribute("aria-expanded",!0))},addEvents:function(){var t=this,e=this;this.$hamburgerBtn.addEventListener("click",(function(e){t.onClickHamburgerBtn(e)})),document.addEventListener("click",(function(i){i.target&&i.target.classList.contains("search_open")?(i.preventDefault(),i.stopPropagation(),t.isShowSearchArea||e.showSearchArea(i)):i.target&&i.target.classList.contains("search_close")&&(i.preventDefault(),i.stopPropagation(),t.isShowSearchArea&&e.hideSearchArea(i))}));for(var i=0;i<this.$dropDownBtn.length;i++)this.$dropDownBtn[i].addEventListener("click",(function(e){t.onDropDownClick(e)}));for(i=0;i<this.$dropClose.length;i++)this.$dropClose[i].addEventListener("click",(function(t){var i=t.currentTarget.closest(".tmpl-headerNav_item");i.querySelector(".tmpl-headerNavItem_label").setAttribute("aria-expanded",!1),e.closeDropBtn(i,e.$dropDown,{duration:0})}));this.$contact.addEventListener("focus",(function(t){e.closeDropDown(e.$navItem,e.$dropDown,{duration:0})})),this.$searchBtn.addEventListener("focus",(function(){e.onCloseHamburgerBtn()}));for(i=0;i<this.$link.length;i++)this.$link[i].addEventListener("click",(function(t){e.analyticsClickLink(t)}));for(var n=0;n<this.$contentTtlLink.length;n++)this.$contentTtlLink[n].addEventListener("click",(function(t){e.conClickLink(t)}));document.addEventListener("keydown",(function(t){e.onKeyDown(t)}))},getLogoSrc:function(){return this.$logoImg.getAttribute("src")},setImg:function(){var t=this,e=this.getLogoSrc();this.$logoImg.setAttribute("src",""),this.$logoImg.addEventListener("load",(function(){t.$header.style.visibility="visible"})),this.$logoImg.setAttribute("src",e)},onClickHamburgerBtn:function(t){var e={ease:"circ.out"};t.currentTarget.getAttribute("aria-controls");if(this.isOpen){this.isOpen=!1;for(var i=0;i<this.$navItem.length;i++){this.$navItem[i].classList.contains("is-open")&&this.$navItem[i].querySelector(".tmpl-headerNavItem_label").click()}for(var n=0;n<this.$spDropDownBtn.length;n++)this.$spDropDownBtn[n].style.visibility="hidden";this.close(e),this.updateHamburgerBtnStateAsHide()}else if(!this.isOpen){this.isOpen=!0;for(n=0;n<this.$spDropDownBtn.length;n++)this.$spDropDownBtn[n].style.visibility="visible";this.open(e),this.updateHamburgerBtnStateAsShow()}},onCloseHamburgerBtn:function(){if(!this.isDesktop){this.isOpen=!1;for(var t=0;t<this.$spDropDownBtn.length;t++)this.$spDropDownBtn[t].style.visibility="hidden";this.close({ease:"circ.out"}),this.$hamburgerBtnName.innerText="メニュー"}},onMouseEnterDropDownBtn:function(t){if(this.isDesktop){for(var e=this.setDropDownTarget(t),i=e.$navItem,n=e.$dropDown,s=e.tweenOption,o=this,r=0;r<this.$navItemLink.length;r++)this.$navItemLink[r].classList.remove("enterLink"),this.$navItemLink[r].setAttribute("aria-expanded",!1);for(var a=0;a<this.$navTopLink.length;a++)this.$navTopLink[a].style.visibility="hidden";for(var h=0;h<this.$navLink.length;h++)this.$navLink[h].style.visibility="hidden";setTimeout((function(){1==i.classList.contains("js-dropDown")?o.openDropDown(i,n,s,t):o.closeDropDown(i,n,s)}),this.dropDownDelay)}},onTouchStart:function(t){this.isOpen&&(this.touchStartX=t.touches[0].pageX,this.touchStartY=t.touches[0].pageY)},onTouchMove:function(t){this.isOpen&&(this.touchMoveX=t.changedTouches[0].pageX,this.touchMoveY=t.changedTouches[0].pageY)},onTouchEnd:function(t){if(this.isOpen){var e=this.touchMoveX-this.touchStartX>50&&Math.abs(this.touchMoveY-this.touchStartY)<100;this.$header.classList.contains(this.className.open)&&e&&(this.close({ease:"circ.out"}),this.touchMoveX=this.touchStartX,this.touchMoveY=this.touchStartY)}},onKeyDown:function(t){return this.isShiftKeyDown=!!t.shiftKey,t.ctrlKey&&t.shiftKey&&70===t.keyCode?(this.$header.classList.remove(this.className.hide),!1):27===t.keyCode?(this.isShowSearchArea&&this.hideSearchArea(t),this.isDrop&&this.closeDropDown(this.$navItem,this.$dropDown,{duration:0}),!1):void 0},conClickLink:function(t){t.preventDefault();var e=t.currentTarget;if(window.innerWidth<641){var i=e.closest(".tmpl-headerContents").querySelector(".tmpl-headerContents_items").querySelectorAll(".tmpl-headerContents_item > a");e.closest(".tmpl-headerContents").classList.contains(this.className.open)?(i.forEach((function(t){t.style.visibility="hidden"})),e.setAttribute("aria-expanded",!1),e.querySelector(".tmpl-headerContents_name").innerText="開く"):(i.forEach((function(t){t.style.visibility="visible"})),e.setAttribute("aria-expanded",!0),e.querySelector(".tmpl-headerContents_name").innerText="閉じる"),e.closest(".tmpl-headerContents").classList.toggle(this.className.open),e.closest(".tmpl-headerNavDropDown").style.height=e.closest(".tmpl-headerNavDropDown_inner").clientHeight+"px"}},analyticsClickLink:function(t){if(s){var e=t.currentTarget,i=e.getAttribute("data-analytics-name")||"",n="",o=e.closest(".tmpl-headerNavItem_dropDown")||e.nextElementSibling;o&&(n=o.getAttribute("data-category")||"");var r=location.href,a="headernavi_"+this.lang+"+"+n+"_to_"+i+"+"+r;s.tl(!0,"o",a)}},analyticsOpenDropDown:function(t){var e=t.getAttribute("data-category"),i=location.href,n="headernavi_"+this.lang+"_show_"+e+"+"+i;s.tl(!0,"o",n)},getScrollDirection:function(){return this.scrollTop>this.savedScrollTop?"down":"up"},setDropDownTarget:function(t){var e=t.currentTarget.parentNode,i=e.querySelector(".tmpl-headerNavItem_dropDown");return{$navItem:e,$dropDown:i,tweenOption:{ease:"circ.out",duration:this.duration}}},open:function(t){this.isOpen=!0,this.$head.classList.add(this.className.open),this.headHeight=this.$head.offsetHeight,t.height=window.innerHeight-this.headHeight,this.$header.classList.add(this.className.open),this.$nav.style.height=t.height+"px",this.toDisableScroll(),this.onOutScroll(this.$nav,"HeaderEvent");var e={foo:1};try{new CustomEvent("onOpenDropDown",{detail:e})}catch(t){document.createEvent("CustomEvent").initCustomEvent("onOpenDropDown",!1,!1,e)}},close:function(t){this.isOpen=!1,this.$head.classList.remove(this.className.open),this.$header.classList.remove(this.className.open),this.$nav.style.height="0px",this.toEnableScroll(),this.offOutScroll(this.$nav,"HeaderEvent"),document.dispatchEvent(new Event("onCloseDropDown"))},openDropDown:function(t,e,i,n){if(n&&"focus"===n.type){var s=this.openDropDownByFocus(t,e);s&&(t=s)}var o=e.querySelector(".tmpl-headerNavDropDown_inner"),r=o.querySelector(".tmpl-headerNavDropDown_toCategoryTop > a"),a=o.querySelectorAll(".tmpl-headerNavDropDown_item > a"),h=o.offsetHeight,l=o.querySelector(".tmpl-headerContents_ttl > a"),c=o.querySelector(".tmpl-headerNavDropDown_toCategoryTop_career > a");o.querySelectorAll(".tmpl-headerContents_item > a");if(this.isDrop=!0,!this.isDesktop)for(var d=0;d<this.$navItem.length&&this.$dropDown[d];d++)this.closeDropDown(this.$navItem[d],this.$dropDown[d],{duration:0});r.style.visibility="visible";for(var p=0;p<a.length;p++)a[p].style.visibility="visible";l&&(l.style.visibility="visible"),c&&(c.style.visibility="visible");for(d=0;d<this.$navItem.length;d++)this.$navItem[d].classList.remove(this.className.open);t.classList.add(this.className.open),i.height=h;if(this.isDesktop)TweenMax.to(this.$dropDownBg,this.duration,i),this.$dropDownBg.classList.add(this.className.open);else{var u=t.offsetHeight*Array.prototype.indexOf.call(t,this.target);TweenMax.to(e,this.duration,i),this.$nav.animate({scrollTop:u},1e3*this.duration)} this.analyticsOpenDropDown(e);var m,v={foo:1};try{m=new CustomEvent("onOpenDropDown",{detail:v})}catch(n){(m=document.createEvent("CustomEvent")).initCustomEvent("onOpenDropDown",!1,!1,v)} document.dispatchEvent(m)},closeDropDown:function(t,e,i){for(var n=0;n<this.$navItemLink.length;n++)this.$navItemLink[n].classList.remove("enterLink");t.classList&&t.classList.remove(this.className.open);for(var s=0;s<this.$navTopLink.length;s++)this.$navTopLink[s].style.visibility="hidden";for(var o=0;o<this.$navLink.length;o++)this.$navLink[o].style.visibility="hidden";for(var r=0;r<this.$contentTtlLink.length;r++){this.$contentTtlLink[r].style.visibility="hidden";this.$contentTtlLink[r].closest(".tmpl-headerContents");this.$contentTtlLink[r].closest(".tmpl-headerContents").classList.remove(this.className.open)}for(var a=0;a<this.$contentItem.length;a++)this.$contentItem[a].style.visibility="hidden";i.ease=this.isDesktop?"none":"circ.out",i.height=0;var h=0===i.duration?0:this.duration;this.isDesktop?(TweenMax.to(this.$dropDownBg,this.duration,i),this.$dropDownBg.classList.remove(this.className.open)):TweenMax.to(e,h,i),this.isDrop=!1;var l,c={foo:1};try{l=new CustomEvent("onCloseDropDown",{detail:c})}catch(t){(l=document.createEvent("CustomEvent")).initCustomEvent("onCloseDropDown",!1,!1,c)} document.dispatchEvent(l)},closeDropBtn:function(t,e,i){for(var n=0;n<this.$navItemLink.length;n++)this.$navItemLink[n].classList.remove("enterLink");t.classList.remove(this.className.open),t.classList.remove("play");for(var s=0;s<this.$navTopLink.length;s++)this.$navTopLink[s].style.visibility="hidden";for(var o=0;o<this.$navLink.length;o++)this.$navLink[o].style.visibility="hidden";for(var r=0;r<this.$contentTtlLink.length;r++)this.$contentTtlLink[r].style.visibility="hidden",this.$contentTtlLink[r].closest(".tmpl-headerContents").classList.remove(this.className.open);for(var a=0;a<this.$contentItem.length;a++)this.$contentItem[a].style.visibility="hidden";i.ease=this.isDesktop?"none":"circ.out",i.height=0;var h=0===i.duration?0:this.duration;this.isDesktop?(TweenMax.to(this.$dropDownBg,this.duration,i),this.$dropDownBg.classList.remove(this.className.open)):TweenMax.to(e,h,i),this.isDrop=!1;var l,c={foo:1};try{l=new CustomEvent("onCloseDropDown",{detail:c})}catch(t){(l=document.createEvent("CustomEvent")).initCustomEvent("onCloseDropDown",!1,!1,c)} document.dispatchEvent(l),t.querySelector(".tmpl-headerNavItem_label").focus()},openDropDownByFocus:function(t,e){var i=e.querySelector(".tmpl-headerNavDropDown_toCategoryTop > a");if(this.isShiftKeyDown){var n=[].slice.call(this.$navItem).indexOf(t);if(n>0){var s={videoBtn:".tmpl-headerNav_pauseController_btn",linkItem:".tmpl-headerNavDropDown_item a"},o=this.$navItem[n-1],r=o.querySelector(s.videoBtn),a=o.querySelectorAll(s.linkItem);return(r||a[a.length-1]).focus(),o}}else i.focus()},showSearchArea:function(t){t.preventDefault(),this.isShowSearchArea=!0,this.$search.style.display="block",this.$search.classList.add(this.className.open),this.$allAnchors.forEach((function(t){t.forEach((function(t){t.setAttribute("tabindex","-1")}))}));var e=document.querySelector(".mf_finder_searchBox_query_input");e&&e.focus(),this.$searchBtn.classList.remove("search_open"),this.$searchBtn.classList.add("search_close"),this.$searchBtn.setAttribute("aria-expanded",!0),this.$searchName.innerText="閉じる",this.searchImg.style.display="none",this.searchcloseBtn.style.display="block"},hideSearchArea:function(t){t.preventDefault(),this.isShowSearchArea=!1,this.$search.style.display="none",this.$search.classList.remove(this.className.open),this.$allAnchors.forEach((function(t){t.forEach((function(t){t.removeAttribute("tabindex")}))})),this.$searchBtn.classList.remove("search_close"),this.$searchBtn.classList.add("search_open"),this.$searchBtn.setAttribute("aria-expanded",!1),this.$searchName.innerText="検索",this.searchcloseBtn.style.display="none",this.searchImg.style.display="block",this.$searchBtn.focus()},onOutScroll:function(t,e){var i=0,n=0,s=0,o=t[0];t.addEventListener("touchstart."+e,(function(t){i=t.touches[0].pageY})),t.addEventListener("touchmove."+e,(function(t){n=t.changedTouches[0].pageY,s=i-n;var e=0==o.scrollTop&&s<0,r=o.scrollTop+o.clientHeight==o.scrollHeight&&s>0;(e||r)&&t.cancelable&&t.preventDefault()}))},offOutScroll:function(t,e){t.removeEventListener(e,t,!1)},isTouchDevice:function(){return window.ontouchstart=!1,null===window.ontouchstart},toEnableScroll:function(){this.$body.style.position="",this.$body.style.top="",window.scrollTo(0,this.savedScrollTop)},toDisableScroll:function(){this.savedScrollTop=this.scrollTop?this.scrollTop:window.scrollTo();var t=this;setTimeout((function(){t.$body.style.position="fixed",t.$body.style.top="-"+t.savedScrollTop}),0)}},document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("html").lang;new n(t).init(t)}))}();