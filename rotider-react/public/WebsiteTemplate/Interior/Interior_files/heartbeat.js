(function(g){var window=this;'use strict';var tLq=function(b,L){if(!Number.isFinite(b))return String(b);b=String(b);var q=b.indexOf(".");q===-1&&(q=b.length);var V=b[0]==="-"?"-":"";V&&(b=b.substring(1));return V+(0,g.Zb2)("0",Math.max(0,L-q))+b},aRQ=function(){return{D:"svg",
S:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},Z:[{D:"path",S:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]}},rH_=function(){return{D:"svg",
S:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},Z:[{D:"path",S:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]}},j28=function(b){typeof b==="number"?(this.date=DX_(b,0,1),T4(this,1)):g.iq(b)?(this.date=DX_(b.getFullYear(),b.getMonth(),b.getDate()),T4(this,b.getDate())):(this.date=new Date(g.jR()),b=this.date.getDate(),
this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),T4(this,b))},DX_=function(b,L,q){L=new Date(b,L,q);
b>=0&&b<100&&L.setFullYear(L.getFullYear()-1900);return L},T4=function(b,L){b.getDate()!=L&&b.date.setUTCHours(b.date.getUTCHours()+(b.getDate()<L?1:-1))},Zf=function(b,L){g.f8.call(this,b,{D:"div",
G:"ytp-reminder-menu",S:{role:"menu",tabindex:"-1"},Z:[{D:"div",G:"ytp-reminder-menu-contents",Z:[{D:"div",G:"ytp-reminder-menu-items"}]}]},100,!0);this.U=L;this.L=[];this.menuPopupRenderer=void 0;this.items=this.X8("ytp-reminder-menu-items");this.hide()},unR=function(b){return(b.menuPopupRenderer&&b.menuPopupRenderer.items||[]).reduce(function(L,q){q&&q.menuServiceItemRenderer&&L.push(q.menuServiceItemRenderer);
return L},[])},yF=function(b){g.C.call(this,{D:"div",
Z:[{D:"button",JV:["ytp-offline-slate-button","ytp-button"],Z:[{D:"div",G:"ytp-offline-slate-button-icon",rC:"{{icon}}"},{D:"div",G:"ytp-offline-slate-button-text",rC:"{{text}}"}]}]});this.W=b;this.upcomingEventReminderButtonRenderer=this.toggleButtonRenderer=null;this.L=void 0;this.j=this.U=null;(this.X=this.X8("ytp-offline-slate-button"))&&this.K(this.X,"click",this.J);this.hide()},P0y=function(b,L,q){!b.toggleButtonRenderer&&L&&L.toggleButtonRenderer?b.toggleButtonRenderer=L.toggleButtonRenderer:
L&&L.toggleButtonRenderer||(b.toggleButtonRenderer=null);
!b.upcomingEventReminderButtonRenderer&&q&&g.T(q,cHw)?b.upcomingEventReminderButtonRenderer=g.T(q,cHw):q&&g.T(q,cHw)||(b.upcomingEventReminderButtonRenderer=null);wI(b)},wI=function(b){if(b.toggleButtonRenderer){var L=b.toggleButtonRenderer;
if(L.isToggled){var q=L.toggledText?g.E9(L.toggledText):"";b.update({text:q,icon:nPR(L.toggledIcon)})}else q=L.defaultText?g.E9(L.defaultText):"",b.update({text:q,icon:nPR(L.defaultIcon)});b.show()}else b.upcomingEventReminderButtonRenderer?(L=kNw(b))?(q=L.text?g.E9(L.text):"",b.update({text:q,icon:nPR(L.icon)}),b.show()):b.hide():b.hide()},AHQ=function(b,L,q){b.j||(b.j=new g.f5(b.W.C().lE));
var V={context:g.FX(b.j.config_||g.Ed())};g.wt()&&(V.context.clientScreenNonce=g.wt());V.params=q;g.Jk(b.j,L,V,{timeout:5E3,onSuccess:function(){b.upcomingEventReminderButtonRenderer&&b.L&&(b.upcomingEventReminderButtonRenderer.currentState=b.L,b.L=void 0)},
onError:function(){lRq(b)},
onTimeout:function(){lRq(b)}})},lRq=function(b){b.toggleButtonRenderer?(b.toggleButtonRenderer.isToggled=!b.toggleButtonRenderer.isToggled,wI(b)):b.upcomingEventReminderButtonRenderer&&(b.L=void 0,wI(b))},nPR=function(b){if(!b)return null;
switch(b.iconType){case "NOTIFICATIONS":return aRQ();case "NOTIFICATIONS_NONE":return rH_();case "NOTIFICATIONS_ACTIVE":return g.IS();default:return null}},kNw=function(b){if(!b.upcomingEventReminderButtonRenderer)return null;
var L=b.L||b.upcomingEventReminderButtonRenderer.currentState;b=g.x(b.upcomingEventReminderButtonRenderer.states||[]);for(var q=b.next();!q.done;q=b.next())if((q=g.T(q.value,Y58))&&q.state===L&&q.button&&g.T(q.button,g.Wa))return g.T(q.button,g.Wa);return null},C0q=function(b){g.C.call(this,{D:"div",
G:"ytp-offline-slate",Z:[{D:"div",G:"ytp-offline-slate-background"},{D:"div",G:"ytp-offline-slate-bar",Z:[{D:"span",G:"ytp-offline-slate-icon",Z:[{D:"svg",S:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},Z:[{D:"path",S:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{D:"circle",S:{cx:"12",cy:"12",r:"3"}}]}]},{D:"span",G:"ytp-offline-slate-messages",Z:[{D:"div",G:"ytp-offline-slate-main-text",S:{"aria-label":"{{label}}"},rC:"{{mainText}}"},{D:"div",G:"ytp-offline-slate-subtitle-text",rC:"{{subtitleText}}"}]},{D:"span",G:"ytp-offline-slate-buttons"}]},{D:"button",JV:["ytp-offline-slate-close-button","ytp-button"],Z:[g.ez()]},{D:"button",JV:["ytp-offline-slate-open-button","ytp-button"],Z:[g.MS()]}]});var L=this;this.api=b;this.U=this.L=null;this.background=this.X8("ytp-offline-slate-background");
this.B=this.X8("ytp-offline-slate-bar");this.X=new g.Xw(function(){g.Rn(L.B,"ytp-offline-slate-bar-fade")},15E3);
this.J=!1;this.j=new g.Xw(function(){g.Rn(L.element,"ytp-offline-slate-collapsed")},15E3);
g.A(this,this.j);g.A(this,this.X);this.countdownTimer=new g.Xw(this.Uu,1E3,this);this.K(b,"presentingplayerstatechange",this.Lb);this.K(b,"livestatedata",this.q0);this.K(this.X8("ytp-offline-slate-close-button"),"click",function(){g.Rn(L.element,"ytp-offline-slate-collapsed")});
this.K(this.X8("ytp-offline-slate-open-button"),"click",function(){g.on(L.element,"ytp-offline-slate-collapsed")});
this.hide();b=this.getVideoData();b.getPlayerResponse()&&(b=b.getPlayerResponse().playabilityStatus)&&this.q0(b);b=this.api.getPresentingPlayerType()===8&&!this.getVideoData().ZF;var q=this.api.getPresentingPlayerType()===8;g.dE(this.element,"ytp-offline-slate-premiere-trailer",b);g.dE(this.element,"ytp-offline-slate-hide-background",q)},mXF=function(b,L,q){if(L){var V=L.subtitleText!=null?g.E9(L.subtitleText):"";
q=q?q:L.mainText!=null?g.E9(L.mainText):"";var Q,G,R,h;L=(h=(Q=L.mainText)==null?void 0:(G=Q.accessibility)==null?void 0:(R=G.accessibilityData)==null?void 0:R.label)!=null?h:q;b.update({mainText:q,subtitleText:V,label:L});g.dE(b.element,"ytp-offline-slate-single-text-line",!V);g.dE(b.B,"ytp-offline-slate-bar-hidden",!q&&!V)}},SG=function(b,L){var q=(0,g.zl)();
this.trigger=b;this.U=L;this.B=q},bCu=function(b){g.Eg.call(this,b);
var L=this;this.Y=!1;this.V=0;this.X=!1;this.L=new g.Xw(function(){s2T(L)},0);
this.U=this.heartbeatParams=null;this.j=!1;this.J=new g.nm(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.Ls=new g.f5(void 0);this.attestationResponse=Promise.resolve(void 0);this.Uo=Promise.resolve(void 0);this.utcOffsetMinutes=-(new j28).getTimezoneOffset();this.B=new g.OO(this);g.A(this,this.L);g.A(this,this.B);Xrq(this);fR_(this);this.B.K(b,"heartbeatparams",this.H_);this.B.K(b,"presentingplayerstatechange",this.lN);this.B.K(b,"videoplayerreset",this.AI);this.B.K(b,g.nf("heartbeat"),
this.onCueRangeEnter);this.j&&this.U&&JHW(this,void 0,this.U);var q=new g.ch(I_(this,!0),0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),V=new g.ch(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});b.b1([q,V]);UX8(this)},UX8=function(b){var L=b.getVideoData();
!L.T("use_rta_for_player")&&L.BD&&(L=L.botguardData)&&g.IC(L,b.player.C())},LP8=function(b){var L,q;
return g.P(function(V){if(V.U==1)return g.u(V,g.pLJ(),2);if(!V.L)return b.sequenceNumber>=3?V.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):V.return(void 0);L=b.getVideoData();q={};return V.return(g.F7T((q.cpn=L.clientPlaybackNonce,q.encryptedVideoId=L.videoId||"",q),1500))})},Xrq=function(b){var L=b.getVideoData();
if(L.BD)if(L.T("use_rta_for_player"))b.attestationResponse=LP8(b);else if(L=new g.GUo(L),g.yP.isInitialized()||b.sequenceNumber>=3){var q=Promise,V=q.resolve,Q=null;if(L.videoData.Z1){var G=g.RrF(L);if(G){Q={};var R={};G=G.split("&");G=g.x(G);for(var h=G.next();!h.done;h=G.next())h=h.value.split("="),h.length===2&&(R[h[0]]=h[1]);R.r1a&&(Q.webResponse=R.r1a);R.r1c&&(Q.error=qGR[Number(R.r1c)]);Q.challenge=L.videoData.Z1}}b.attestationResponse=V.call(q,Q||void 0)}},V2q=function(b){var L=b.getVideoData();
if(!g.xX(b.getVideoData())||L.Ov)return!1;if(L.X){b=L.X.flavor==="playready"&&L.T("html5_innertube_heartbeats_for_playready");var q=L.X.flavor==="widevine"&&L.T("html5_innertube_heartbeats_for_widevine");L=g.Ou(L.X)&&L.T("html5_innertube_heartbeats_for_fairplay");return!(b||q||L)}return!0},QDQ=function(b){if(V2q(b))return!!b.heartbeatParams;
var L=b.getVideoData();return!g.xX(b.getVideoData())||L.Lw||L.b6?!!L.heartbeatToken:!1},WX=function(b,L){if(!b.L.isActive()&&b.Y){var q=b.getVideoData();
if(QDQ(b)||q.isLivePlayback){if(L===void 0)if(b.X)if(b.j)L=7500;else{var V;L=((V=b.heartbeatParams)==null?0:V.interval)?b.heartbeatParams.interval*1E3:b.getVideoData().B2||6E4}else L=1E3;b.L.start(L)}}},o8q=function(b,L,q){L.aM&&(q=g.il(q,{internalipoverride:L.aM}));
var V={cpn:L.clientPlaybackNonce};L.contextParams&&(V.context_params=L.contextParams);L.N0&&(V.kpt=L.N0);q=g.il(q,V);g.xj(q,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(Q){if(!b.L.isActive()&&$U(b)){b.J.reset();b.sequenceNumber++;Q=Q.responseText;var G=GJu(Q);if(G){b.player.vx("onHeartbeat",G);var R=G.status==="ok"?G.stop_heartbeat?2:0:G.status==="stop"?1:G.status==="live_stream_offline"?0:-1}else R=(R=Q.match(RXW))?R[1]==="0"?0:1:-1;NRW(b,void 0,G,Q,R)}},
onError:function(Q){$U(b)&&HX(b,!0,"net-"+Q.status)},
onTimeout:function(){$U(b)&&HX(b,!0,"timeout")},
withCredentials:!0})},s2T=function(b){var L,q;
g.P(function(V){L=b.player.C();q=b.getVideoData();if(!$U(b))return V.return();if(V2q(b))return hXT(b,L,q),V.F8(0);Xrq(b);return g.u(V,dms(b,L,q),0)})},hXT=function(b,L,q){var V;
if((V=b.heartbeatParams)!=null&&V.url){var Q=g.il(b.heartbeatParams.url,{request_id:g.b1$()});q.yc&&(Q=g.il(Q,{vvt:q.yc}),q.mdxEnvironment&&(Q=g.il(Q,{mdx_environment:q.mdxEnvironment})));g.Mn(L,q.oauthToken).then(function(G){G&&(Q=g.il(Q,{access_token:G}));o8q(b,q,Q)})}},$U=function(b){var L=b.getVideoData();
return b.player.getPresentingPlayerType()===3||!b.player.C().experiments.zz().U.PM(g.V5s)&&g.X(b.player.getPlayerStateObject(b.getPlayerType()),4)?!1:QDQ(b)||L.isLivePlayback?!0:(z4(b),!1)},dms=function(b,L,q){var V,Q,G,R,h,d,O,B,E,F,p,M,y,S,v,K,t,r,k,n;
return g.P(function(G$){if(G$.U==1)return V="player/heartbeat",G={videoId:q.videoId,sequenceNumber:b.sequenceNumber,heartbeatServerData:(Q=b.yc)!=null?Q:q.heartbeatServerData},b.Uo=b.attestationResponse,q.BD?g.u(G$,b.Uo,3):G$.F8(2);G$.U!=2&&(G.attestationResponse=G$.L);R=g.ES(q);d=(h=R.client)!=null?h:{};d.utcOffsetMinutes=b.utcOffsetMinutes;G.context=R;G.cpn=q.clientPlaybackNonce;if(O=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)d.timeZone=O;B={heartbeatChecks:[]};
if(E=q.getPlayerResponse())q.heartbeatToken&&(G.heartbeatToken=q.heartbeatToken),(F=E.playabilityStatus)&&(p=F.liveStreamability)&&p.liveStreamabilityRenderer&&B.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");q.heartbeatToken&&B.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.dH(L)&&(B.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),M=OCb(b),y={},M!==null&&(y.clientPlayerPositionUtcMillis=M),v=(S=b.player.HM())==null?void 0:g.$Z(S),t=((K=v)==null?void 0:K.freePreviewWatchedDuration)||
0,t>0&&(y.freePreviewWatchedDuration={seconds:""+t}),B.unpluggedParams=y);G.heartbeatRequestParams=B;q.isLivePlayback?(r=OCb(b),r!==null&&(G.playbackState||(G.playbackState={}),G.playbackState.playbackPosition={utcTimeMillis:r})):L.T("enable_heartbeat_vod_playback_position")&&(k=BRu(b),k!==null&&(G.playbackState||(G.playbackState={}),G.playbackState.playbackPosition={streamTimeMillis:k}));b.player.publish("heartbeatRequest",G);n={timeout:3E4,onSuccess:function(L3){if(!b.L.isActive()&&$U(b)){var VJ=
b.getVideoData(),oY=VJ.BD&&b.Uo==null,Eo;VJ.BD=!((Eo=L3.heartbeatAttestationConfig)==null||!Eo.requiresAttestation)||oY;oY=L3.playabilityStatus;Eo=JSON.stringify(oY)||"{}";L3.authenticationMismatch&&b.player.Bx("authshear",{});var qT=-1;var S5=L3.playabilityStatus;S5&&(b.player.vx("onHeartbeat",S5),S5.status==="OK"?qT=L3.stopHeartbeat?2:0:S5.status==="UNPLAYABLE"?qT=1:S5.status==="LIVE_STREAM_OFFLINE"&&(qT=0));b.sequenceNumber&&qT===-1||b.J.reset();b.sequenceNumber++;L3.heartbeatServerData&&(b.yc=
L3.heartbeatServerData);VJ.G5=L3;(S5=L3.playerCueRangeSet)&&g.h6(VJ,S5);L3.playerCueRanges&&L3.playerCueRanges.length>0&&(VJ.cueRanges=L3.playerCueRanges);var f3,Nu;((f3=L3.progressBarConfig)==null?0:f3.progressBarStartPosition)&&((Nu=L3.progressBarConfig)==null?0:Nu.progressBarEndPosition)&&(VJ.progressBarStartPosition=L3.progressBarConfig.progressBarStartPosition,VJ.progressBarEndPosition=L3.progressBarConfig.progressBarEndPosition);VJ.compositeLiveIngestionOffsetToken=L3.compositeLiveIngestionOffsetToken;
L3.compositeLiveStatusToken!==VJ.compositeLiveStatusToken&&(VJ.compositeLiveStatusToken=L3.compositeLiveStatusToken);VJ.heartbeatLoggingToken=L3.heartbeatLoggingToken;VJ.publish("dataupdated");NRW(b,L3,oY,Eo,qT)}},
onError:function(L3){$U(b)&&HX(b,!0,"net-"+L3.status)},
onTimeout:function(){$U(b)&&HX(b,!0,"timeout")}};
g.Mn(L,g.J6(q)).then(function(L3){L3&&(n.Il="Bearer "+L3);g.Jk(b.Ls,V,G,n)});
g.GF(G$)})},NRW=function(b,L,q,V,Q){Q===-1?(q="decode "+g.Pw(V,3),HX(b,!1,q)):Q===2?(z4(b),b.X=!0):(b.V=0,b.L.stop(),Q===1?(b.X=!1,q&&q.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&b.player.AR(!0),Q="pe."+(q==null?void 0:q.errorCode)+";ps."+(q==null?void 0:q.status),b.player.gm("heartbeat.stop",2,b.TT(V),Q),g.pB("heartbeatActionPlayerHalted",E8F(q)),(L==null?0:L.videoTransitionEndpoint)&&q&&(L=L.videoTransitionEndpoint,(V=g.T(L,g.O6))&&FP8(b,V,q,{itct:L==null?void 0:L.clickTrackingParams}))):(b.X=
!0,V=0,b.j&&q&&(V=JHW(b,L,q),b.player.publish("livestatedata",q)),V?WX(b,V):WX(b)))},JHW=function(b,L,q){var V=q.liveStreamability&&q.liveStreamability.liveStreamabilityRenderer,Q=!(!V||!(V.switchStreamsImmediately||V.transitionTiming&&V.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
L=p7_(L,V);var G=b.getVideoData(),R=b.player.getPlayerStateObject(b.getPlayerType()),h=R.isPlaying()&&!g.c4(G)&&!b.player.isAtLiveHead(b.getPlayerType());if(G.C().u$()){var d,O=((d=b.player.v5())==null?void 0:d.vM())||{};O.status=q.status||"";O.dvr=""+ +h;O["switch"]=""+ +Q;O.ended=""+ +!(!V||!V.displayEndscreen);b.player.Bx("heartbeat",O)}d=V&&V.broadcastId;O=b.U&&b.U.liveStreamability&&b.U.liveStreamability.liveStreamabilityRenderer&&b.U.liveStreamability.liveStreamabilityRenderer.broadcastId;var B=
d!==O&&d!=null;B&&b.player.Bx("lbidh",{broadcastId:d},!0);var E=b.player.T("always_cache_redirect_endpoint");if(h&&!Q&&!E)return L;var F=V&&V.streamTransitionEndpoint&&g.T(V.streamTransitionEndpoint,g.O6),p=V&&V.transitionTiming;if(p==="STREAM_TRANSITION_TIMING_AT_STREAM_END")b.getVideoData().transitionEndpointAtEndOfStream=F;else if(E&&!F&&b.getVideoData().transitionEndpointAtEndOfStream)b.getVideoData().transitionEndpointAtEndOfStream=void 0;else if(!E&&F&&FP8(b,F,q))return L;if(h&&!Q&&E||E&&F&&
(p==="STREAM_TRANSITION_TIMING_IMMEDIATELY"||p==="STREAM_TRANSITION_TIMING_UNSPECIFIED")&&FP8(b,F,q))return L;if(q.status.toUpperCase()==="OK"){if(!g.Db(G)||B){var M={video_id:G.videoId};G.cF&&(M.is_live_destination="1");M.disable_watch_next=!0;M.raw_watch_next_response=G.getWatchNextResponse();M.autonav_state=G.autonavState;M.oauth_token=G.oauthToken;M.s8=G.s8;G.J&&(M.vss_credentials_token=G.J,M.vss_credentials_token_type=G.QM);G.yc&&(M.vvt=G.yc);V=void 0;g.Db(G)?B&&(V=new SG("broadcastIdChanged",
O+","+d),b.qk("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",q)):(d&&(V=new SG("formatsReceived",""+d)),b.qk("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",q));B&&b.player.Bx("lbidr",{broadcastId:d});b.player.loadVideoByPlayerVars(M,void 0,void 0,void 0,V);return L}b.player.Wn("heartbeat",b.getPlayerType())}V&&V.displayEndscreen&&(b.offlineSlate?(b=b.offlineSlate,b.J=!0,b.xf&&b.api.e3()):R.isBuffering()&&
(G=((M=b.player.v5())==null?void 0:M.vM())||{},b.player.Bx("hbse",G,!0),b.player.e3(!0,"h"),b.player.vx("onLiveMediaEnded",q)));return L},p7_=function(b,L){return(b=Number(b==null?void 0:b.pollDelayMs))?b:(L=Number(L==null?void 0:L.pollDelayMs))?L:0},HX=function(b,L,q){if(!b.L.isActive()){b.L.stop();
b.V++;var V=L?"heartbeat.net":"heartbeat.servererror";var Q=b.getVideoData();if(Q.dU||L&&!g.xX(b.getVideoData())&&!QDQ(b)&&Q.isLivePlayback)Q=!1;else{var G,R;((R=b.heartbeatParams)==null?0:R.retries)?G=b.heartbeatParams.retries:G=Q.xa||5;Q=b.V>=G}Q?(g.pB("heartbeatActionPlayerHalted",L?{enforcedPolicyToHaltOnNetworkFailure:!0}:E8F()),(L=b.getVideoData())&&L.isLivePlayback?b.player.gm(V,1,"Video playback interrupted. Please try again.",q):b.player.gm(V,1,"Sorry, there was an error licensing this video.",
q)):(WX(b,b.J.getValue()),g.ks(b.J))}},E8F=function(b){var L={enforcedPolicyToHaltOnNetworkFailure:!1};
b&&(L.serializedServerContext=b.additionalLoggingData);return L},z4=function(b){b.V=0;
b.L.stop();b.X=!1;b.sequenceNumber=0},fR_=function(b){var L=b.getVideoData(),q=b.player.C();
if(L.isLivePlayback)if(g.We(q.X)){b.j=!0;b.Y=!0;if(!g.Bh(q)||g.dH(q))b.offlineSlate=new C0q(b.player),g.A(b,b.offlineSlate),g.lt(b.player,b.offlineSlate.element,4);(L=L.getPlayerResponse())&&L.playabilityStatus&&(b.U=L.playabilityStatus);var V;((V=b.U)==null?void 0:V.status)!=="UNPLAYABLE"&&(b.U?(V=p7_(void 0,b.U.liveStreamability&&b.U.liveStreamability.liveStreamabilityRenderer))?WX(b,V):WX(b,7500):WX(b,I_(b,!0)))}else b.player.gm("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.mQ(L.au,"heartbeat")&&b.player.Wn("heartbeat",b.getPlayerType())},FP8=function(b,L,q,V){var Q=L&&L.videoId;
return Q?(b.player.O8(Q,Object.assign({},{autonav:"1"},V||{}),void 0,!0,!0,L,g.J6(b.getVideoData())),b.qk("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",q),!0):!1},OCb=function(b){return(b=b.player.getProgressState(b.getPlayerType()).ingestionTime)&&isFinite(b)?""+Math.floor(b*1E3):null},BRu=function(b){return(b=b.player.getCurrentTime(b.getPlayerType()))&&isFinite(b)?""+Math.floor(b*1E3):null},I_=function(b,L){L=L===void 0?!1:L;
b=b.getVideoData();return b.T("html5_use_server_init_heartbeat_delay")?isNaN(b.B2)?15E3:b.B2:L?1E3:2E3},GJu=function(b){try{var L=JSON.parse(b);
return L!=null?L:void 0}catch(q){}},M2Q={ERAS:["BC",
"AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5},eX8=M2Q;eX8=M2Q;
var qGR=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],TRy={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.e=j28.prototype;g.e.Vu=eX8.FIRSTDAYOFWEEK;g.e.A6=eX8.FIRSTWEEKCUTOFFDAY;
g.e.clone=function(){var b=new j28(this.date);b.Vu=this.Vu;b.A6=this.A6;return b};
g.e.getFullYear=function(){return this.date.getFullYear()};
g.e.getYear=function(){return this.getFullYear()};
g.e.getMonth=function(){return this.date.getMonth()};
g.e.getDate=function(){return this.date.getDate()};
g.e.getTime=function(){return this.date.getTime()};
g.e.getDay=function(){return this.date.getDay()};
g.e.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.e.getUTCMonth=function(){return this.date.getUTCMonth()};
g.e.getUTCDate=function(){return this.date.getUTCDate()};
g.e.getUTCDay=function(){return this.date.getDay()};
g.e.getUTCHours=function(){return this.date.getUTCHours()};
g.e.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.e.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.e.set=function(b){this.date=new Date(b.getFullYear(),b.getMonth(),b.getDate())};
g.e.setFullYear=function(b){this.date.setFullYear(b)};
g.e.setYear=function(b){this.setFullYear(b)};
g.e.setMonth=function(b){this.date.setMonth(b)};
g.e.setDate=function(b){this.date.setDate(b)};
g.e.setTime=function(b){this.date.setTime(b)};
g.e.setUTCFullYear=function(b){this.date.setUTCFullYear(b)};
g.e.setUTCMonth=function(b){this.date.setUTCMonth(b)};
g.e.setUTCDate=function(b){this.date.setUTCDate(b)};
g.e.add=function(b){if(b.years||b.months){var L=this.getMonth()+b.months+b.years*12,q=this.getYear()+Math.floor(L/12);L%=12;L<0&&(L+=12);a:{switch(L){case 1:var V=q%4!=0||q%100==0&&q%400!=0?28:29;break a;case 5:case 8:case 10:case 3:V=30;break a}V=31}V=Math.min(V,this.getDate());this.setDate(1);this.setFullYear(q);this.setMonth(L);this.setDate(V)}b.days&&(q=this.getYear(),L=q>=0&&q<=99?-1900:0,b=new Date((new Date(q,this.getMonth(),this.getDate(),12)).getTime()+b.days*864E5),this.setDate(1),this.setFullYear(b.getFullYear()+
L),this.setMonth(b.getMonth()),this.setDate(b.getDate()),T4(this,b.getDate()))};
g.e.equals=function(b){return!(!b||this.getYear()!=b.getYear()||this.getMonth()!=b.getMonth()||this.getDate()!=b.getDate())};
g.e.toString=function(){var b=this.getFullYear(),L=b<0?"-":b>=1E4?"+":"";return[L+tLq(Math.abs(b),L?6:4),tLq(this.getMonth()+1,2),tLq(this.getDate(),2)].join("")+""};
g.e.valueOf=function(){return this.date.valueOf()};var ZCT=new g.t5("addUpcomingEventReminderEndpoint");var ynW=new g.t5("removeUpcomingEventReminderEndpoint");var w7W=new g.t5("updateUpcomingEventReminderButtonStateCommand");var cHw=new g.t5("upcomingEventReminderButtonRenderer"),Y58=new g.t5("upcomingEventReminderButtonStateRenderer");g.Z(Zf,g.f8);
Zf.prototype.updateMenuItems=function(){var b=this,L=unR(this),q=0;q=0;for(var V={};q<L.length;V={H7:void 0},q++){var Q=this.L[q];Q||(Q=new g.C({D:"div",G:"ytp-reminder-menu-item",S:{role:"menuitem",tabindex:"0"},Z:[{D:"div",G:"ytp-reminder-menu-item-icon",rC:"{{icon}}"},{D:"div",G:"ytp-reminder-menu-item-label",rC:"{{text}}"}]}),V.H7=q,Q.listen("click",function(R){return function(){var h=R.H7;b.i$();h=unR(b)[h];b.publish("reminderMenuItemClicked",h.serviceEndpoint||h.command)}}(V)),Q.ID(this.items),
this.L[q]=Q);
var G=L[q];V=null;switch(G.icon&&G.icon.iconType){case "NOTIFICATIONS":V=aRQ();break;case "NOTIFICATIONS_NONE":V=rH_();break;case "NOTIFICATIONS_ACTIVE":V=g.IS()}G=G.text?g.E9(G.text):"";Q.update({icon:V,text:G})}for(;q<this.L.length;)this.L.pop().dispose();q===0?this.i$():this.Ca(this.U)};
Zf.prototype.hide=function(){this.U&&this.U.removeAttribute("aria-haspopup");g.f8.prototype.hide.call(this)};
Zf.prototype.show=function(){this.U&&this.U.setAttribute("aria-haspopup","true");g.f8.prototype.show.call(this)};
Zf.prototype.jP=function(){g.Mi(this.L);g.f8.prototype.jP.call(this)};g.Z(yF,g.C);
yF.prototype.J=function(){if(this.toggleButtonRenderer){var b=this.toggleButtonRenderer;b.isToggled?this.B(b.toggledServiceEndpoint):this.B(b.defaultServiceEndpoint);b.isToggled=!b.isToggled;wI(this)}else if(this.upcomingEventReminderButtonRenderer)if(this.U&&this.U.xf)this.U.i$();else{var L=kNw(this);L&&this.B(L.serviceEndpoint||L.command);L=((b=g.T(L==null?void 0:L.command,g.pd))==null?void 0:b.commands)||[];a:{b=g.x(L);for(var q=b.next();!q.done;q=b.next()){var V=L=void 0;if(q=(L=g.T(q.value,g.cF8))==
null?void 0:(V=L.popup)==null?void 0:V.menuPopupRenderer){b=q;break a}}b=void 0}this.U||(this.U=new Zf(this.W,this.X),this.U.ID(this.element),g.A(this,this.U),this.U.subscribe("reminderMenuItemClicked",this.B,this));L=this.U;L.menuPopupRenderer=b;L.updateMenuItems()}};
yF.prototype.B=function(b){var L=g.T(b,ZCT),q=g.T(b,ynW);if(b&&(L||q)){if(L){var V=L;var Q="notification/add_upcoming_event_reminder"}else q&&(V=q,Q="notification/remove_upcoming_event_reminder");if(Q&&V&&V.params)for(AHQ(this,Q,V.params),b=g.x(V.commands||[]),L=b.next();!L.done;L=b.next())if((L=L.value)&&g.T(L,w7W)){this.L=g.T(L,w7W).state;wI(this);break}}};g.Z(C0q,g.C);g.e=C0q.prototype;g.e.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.e.getVideoData=function(){return this.api.getVideoData(this.getPlayerType())};
g.e.q0=function(b){var L,q,V=b==null?void 0:(L=b.liveStreamability)==null?void 0:(q=L.liveStreamabilityRenderer)==null?void 0:q.offlineSlate;if(V){this.L=b;L=V.liveStreamOfflineSlateRenderer;L.canShowCountdown?this.Uu():mXF(this,L);var Q,G,R,h;if(q=b==null?void 0:(Q=b.liveStreamability)==null?void 0:(G=Q.liveStreamabilityRenderer)==null?void 0:(R=G.offlineSlate)==null?void 0:(h=R.liveStreamOfflineSlateRenderer)==null?void 0:h.thumbnail){Q=0;G=null;R=q.thumbnails;for(h=0;h<R.length;h++)R[h].width>
Q&&(Q=R[h].width||0,G=R[h].url);G&&(this.background.style.backgroundImage="url("+G+")")}else this.background.style.backgroundImage="";L.actionButtons||L.reminderButton?(this.U||(this.U=new yF(this.api),this.U.ID(this.X8("ytp-offline-slate-buttons")),g.A(this,this.U)),P0y(this.U,L.actionButtons&&L.actionButtons[0],L.reminderButton)):this.U&&P0y(this.U,null,null);this.L=b}else this.L=null;this.Lb()};
g.e.Lb=function(b){if(this.api.getPresentingPlayerType()===8)var L=!0;else{var q=this.api.getPlayerStateObject(),V=this.getVideoData();L=V.isLivePlayback&&(q.isBuffering()||g.X(q,2)||g.X(q,64));var Q=V.autonavState===2&&g.X(q,2);q=q.isPlaying()&&!g.c4(V)&&!this.api.isAtLiveHead(void 0,!0);L=L&&!q&&!Q}L&&this.L?this.xf?(b==null?0:g.E4(b,2))&&!this.getVideoData().ZF&&(g.on(this.element,"ytp-offline-slate-collapsed"),this.j.stop(),g.on(this.B,"ytp-offline-slate-bar-fade"),this.X.start()):(this.show(),
this.j.start(),this.api.publish("offlineslatestatechange"),this.J&&this.api.e3()):this.xf&&(this.hide(),this.api.publish("offlineslatestatechange"))};
g.e.Uu=function(){var b,L,q,V,Q=(b=this.L)==null?void 0:(L=b.liveStreamability)==null?void 0:(q=L.liveStreamabilityRenderer)==null?void 0:(V=q.offlineSlate)==null?void 0:V.liveStreamOfflineSlateRenderer;Q&&(b=Math.floor(g.jR()/1E3),L=Q.canShowCountdown&&Number(Q.scheduledStartTime),!L||L<=b?(mXF(this,Q),this.countdownTimer.stop()):(mXF(this,Q,g.SV(L-b)),g.fI(this.countdownTimer)))};
g.e.jP=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.C.prototype.jP.call(this)};SG.prototype.L=function(b){return this.trigger&&b.trigger?this.trigger===b.trigger&&this.U===b.U:!1};
SG.prototype.isExpired=function(){return(0,g.zl)()-this.B>6E4};
SG.prototype.toString=function(){return"heartbeat:"+this.trigger+":"+this.U};g.Z(bCu,g.Eg);g.e=bCu.prototype;g.e.jP=function(){z4(this);this.player.Ey("heartbeat");g.Eg.prototype.jP.call(this)};
g.e.onCueRangeEnter=function(){this.Y=!0;WX(this,I_(this))};
g.e.H_=function(b){this.heartbeatParams=b;WX(this,I_(this))};
g.e.lN=function(b){var L;this.player.getPresentingPlayerType()!==8&&((L=this.U)==null?void 0:L.status)!=="UNPLAYABLE"&&(g.X(b.state,2)||g.X(b.state,64)?(z4(this),this.j&&(this.Y=!0,WX(this,I_(this,!0)))):(L=this.player.C().experiments.zz().U.PM(g.V5s),(g.X(b.state,1)||g.X(b.state,8)||L&&g.X(b.state,4))&&WX(this,I_(this))))};
g.e.AI=function(){this.player.getPresentingPlayerType()!==3&&WX(this,I_(this))};
g.e.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.e.getVideoData=function(){return this.player.getVideoData(this.getPlayerType())};
g.e.sj=function(b){switch(b){case 4:case 3:return!1}return!0};
g.e.qk=function(b,L,q){b={trigger:b,reason:L};q&&(b.serializedServerContext=q.additionalLoggingData);g.pB("heartbeatActionPlayerTransitioned",b)};
g.e.TT=function(b){var L="LICENSE",q=GJu(b);if(q)return q.reason||g.DC[L]||"";if(b=b.match(RXW))if(b=Number(b[1]))L=(L=TRy[b.toString()])?L:"LICENSE";return g.DC[L]||""};
g.e.A9=function(){return!!this.offlineSlate&&this.offlineSlate.xf};
var RXW=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.BM("heartbeat",bCu);})(_yt_player);
